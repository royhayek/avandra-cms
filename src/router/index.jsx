// ------------------------------------------------------------ //
// ------------------------- Packages ------------------------- //
// ------------------------------------------------------------ //
import React, { useMemo } from "react";
import { Route, Switch } from "react-router-dom";
// ------------------------------------------------------------ //
// ------------------------ Components ------------------------ //
// ------------------------------------------------------------ //
import { Box } from "@mui/material";
import SubRouter from "./SubRouter";
import NoMatch from "./NoMatch";
// ------------------------------------------------------------ //
// ------------------------- Utilities ------------------------ //
// ------------------------------------------------------------ //
import config from "./Config";
import useStyles from "./styles";

// ------------------------------------------------------------ //
// ------------------------- Component ------------------------ //
// ------------------------------------------------------------ //

const Router = (props) => {
// --------------------------------------------------------- //
// ------------------------ Static ------------------------- //
  const classes = useStyles();
// ----------------------- /Static ------------------------- //
// --------------------------------------------------------- //

  //----------------------------------------------------//
  //---------------------- REDUX -----------------------//

  //--------------------- /REDUX -----------------------//
  //----------------------------------------------------//

  //----------------------------------------------------//
  //------------------- RENDERERS ----------------------//
  const renderRoute = useMemo(() => {
    try {
      // TODO: replace "admin" with the dynamic role
      const _routes = config["admin"].routes;

      const _router = (
        <Switch>
          {_routes.map((route, i) => (
            <SubRouter key={i} {...route} force={false} />
          ))}
          <Route component={NoMatch} />
        </Switch>
      );

      return _router;
    } catch (err) {
      console.log("Error in [Router - renderRoute] :: ", err);
      return null;
    }
  }, []);
  //------------------- /RENDERERS ---------------------//
  //----------------------------------------------------//

  return (
    <>
      {/* Header */}

      <Box component="section" style={{ flex: 1 }} className={classes.content}>
        {renderRoute}
      </Box>

      {/* Footer */}
    </>
  );
};

export default Router;
